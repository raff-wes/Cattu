<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Cattu</title>
    <link rel="stylesheet" href="styl.css">
    <link rel="icon" type="image/x-icon" href="favicon.png">
</head>

<body>

    <ul>
        <li><a href="#home">Start</a></li>
        <li><a href="#form">Formularz</a></li>
    </ul>

    <div id="poraDnia">
        <div id="bgchange">


            <div class="main">

                <form>

                    Podaj tytuł piosenki<br>
                    <input type="text" id="tytul" name="title" size="20px" required><br><br> Podaj wykonawcę<br>
                    <input type="text" id="wykonawca" name="author" size="20px" required><br><br>Nazwa użytkownika
                    <br>
                    <input type="text" id="uzytkownik" name="user" size="20px" required value="Guest"><br><br> W jakim Jesteś nastroju?<br>
                    <input type="checkbox" id="wesoly" value="wesoly" name="mood">
                    <label for="wesoly"> Wesoły/a </label><br>

                    <input type="checkbox" id="smutny" value="smutny" name="mood">
                    <label for="smutny"> Smutny/a </label><br>

                    <input type="checkbox" id="znudzony" value="znudzony" name="mood">
                    <label for="znudzony"> Znudzony/a </label><br>

                    <input type="checkbox" id="zmeczony" value="zmeczony" name="mood">
                    <label for="zmeczony"> Zmęczony/a </label><br>

                    <input type="checkbox" id="zdenerwowany" value="zdenerwowany" name="mood">
                    <label for="zdenerwowany"> Zdenerwowany/a </label><br>

                    <input type="checkbox" id="radosny" value="radosny" name="mood">
                    <label for="radosny"> Radosny/a </label><br>

                    <input type="checkbox" id="neutralny" value="neutralny" name="mood">
                    <label for="neutralny"> Neutralny/a </label><br>

                    <br>

                    <label for="pora"> Podaj porę dnia </label><br>
                    <select name="time" id="pora" required>
                        <option value="rano">Rano</option>
                        <option value="poludnie">Południe</option>
                        <option value="wieczor">Wieczór</option>
                        <option value="noc">Noc</option>
                        <option value="nie_pam">Nie pamiętam</option>
                    </select><br><br>

                    <label for="pora"> Podaj datę </label><br>
                    <input name="date" type="date" id="date">
                    <button onclick="todayFunction()" type="button" class="submit" id="today">Dzisiaj</button>
                    <br><br>


                    <button type="submit" class="submit">Skończone!</button>
                    <button type="reset" class="submit">Resetuj!</button>

                </form>

            </div>

            <div class="content">

                <div id="tlo3" onmouseover="rotatemoon(this)" onmouseout="rotatemoonB(this)">
                    <div id="obiekt_glowny3" onmouseover="movein(this)" onmouseout="moveout(this)">
                        <div id="ksiezyc_srodek"></div>
                    </div>
                </div>
                <div id="tloGwiazdy1">
                    <div id="gwiazda1"></div>
                    <div id="gwiazda2"></div>
                    <div id="gwiazda3"></div>
                </div>
                <div id="tloGwiazdy2">
                    <div id="gwiazda11"></div>
                    <div id="gwiazda12"></div>
                    <div id="gwiazda13"></div>
                </div>


                <div id="tlo2">
                    <div id="obiekt_glowny2" onmouseover="bigSun(this)" onmouseout="smolSun(this)">
                        <div id="promien1"></div>
                        <div id="promien2"></div>
                        <div id="promien3"></div>
                        <div id="promien4"></div>
                        <div id="promien5"></div>
                        <div id="promien6"></div>
                        <div id="promien7"></div>
                        <div id="promien8"></div>
                        <div id="promien9"></div>
                        <div id="promien0"></div>
                    </div>
                </div>

                <div id="tlo1">
                    <div id="obiekt_glowny1">
                        <div id="slonce" onmouseover="blouClounds(this)" onmouseout="whiteClounds(this)">
                            <div id="promien11"></div>
                            <div id="promien12"></div>
                            <div id="promien13"></div>
                            <div id="promien14"></div>
                        </div>
                    </div>
                    <div id="chmura1"></div>
                    <div id="chmura2"></div>
                </div>

            </div>

            <div class="info1">

                <a href=""><br><br><br><br><br><br><br><br><br>Zobacz pełną historię</a>
            </div>
            <div class="info2">
                <div id="header">
                    Sprawdź wyniki dla:
                    <input type="text" id="wypis" name="sprawdz" size="20px" required>
                    <button type="button" id="wez" class="submit">Sprawdź</button>
                </div>
                <div id="sprawdz">
                    <!-- Tutaj chcemy pobierać dane z bazy żeby móc je wyświetlić (pobierać może zewnętrzny skrypt) -->
                    *Dane pobrane z bazy*
                </div>
            </div>
        </div>

        <script src="script1.js"></script>
        <script>
            // const form = document.querySelector(".main > form")
            // form.onsubmit
            // const funkcjaSpecjalna = function(e) {
            //     e.preventDefault();

            //     const title = document.getElementsByName("title").value;
            //     const author = document.getElementsByName("author").value;
            //     const user = document.getElementsByName("user").value;
            //     const mood = document.getElementsByName("mood").value;
            //     const time = document.getElementsByName("time").value;
            //     const date = document.getElementsByName("date").value;
            // }
            const jakasfunkcja = function(e) {
                e.preventDefault();

                const title = document.getElementsByName("title")[0].value;
                const author = document.getElementsByName("author")[0].value;
                const user = document.getElementsByName("user")[0].value;
                const mood = document.getElementsByName("mood")[0].value;
                const time = document.getElementsByName("time")[0].value;
                const date = document.getElementsByName("date")[0].value;

                console.log(title);
                console.log(author);
                console.log(user);
                console.log(mood);
                console.log(time);
                console.log(date);
                fetch("http://localhost:8080/added", {
                    method: "POST",
                    body: JSON.stringify({
                        title: title,
                        author: author,
                        user: user,
                        mood: mood,
                        date: date,
                        time: time
                    }),
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).catch(err => console.log(err.message));
            }

            const form = document.querySelector(".main > form")
            form.addEventListener("submit", jakasfunkcja)
            document.getElementById("wez").addEventListener("click", funkcjaDaj)

            function todayFunction() {
                let dzis = new Date();
                //console.log(dzis);
                //document.getElementById("today").style.color = "red";
                let wynik = "";
                //console.log(wynik);
                wynik += dzis.getFullYear();



                wynik += "-";
                if (dzis.getMonth() + 1 < 10) {
                    wynik += "0";
                }
                wynik += (dzis.getMonth() + 1);
                wynik += "-";

                if (dzis.getDate() < 10) {
                    wynik += "0";
                }
                wynik += dzis.getDate();

                //console.log(wynik);
                document.getElementById("date").value = wynik;
            }

            function funkcjaDaj() {
                fetch("http://localhost:8080/sprawdz", {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json"
                    }
                }).then(resp => resp.json()).then(json => {
                    console.log(json)
                    let sprawdz = document.getElementById("sprawdz");
                    sprawdz.innerHTML = "";
                    json.forEach(element => {
                        console.log(element);
                        let div = document.createElement("div");
                        div.classList.add("wynik");
                        let title = document.createElement("p");
                        title.textContent = element.title;
                        let author = document.createElement("p");
                        author.textContent = element.author;
                        let mood = document.createElement("p");
                        mood.textContent = element.mood;
                        let time = document.createElement("p");
                        time.textContent = element.time;
                        let date = document.createElement("p");
                        date.textContent = element.date;
                        div.appendChild(title);
                        div.appendChild(author);
                        div.appendChild(mood);
                        div.appendChild(time);
                        div.appendChild(date);
                        sprawdz.appendChild(div);
                    });
                }).catch(err => console.log(err.message));
            }
        </script>
</body>

</html>